<h1 class="mb-4"><u>Project : <%= @project.title %></u></h1>

<div class="card shadow-sm w-50 align-items-center m-auto border border-primary" style="border-radius: 20px;">
  <div class="card-body">

    <p class="card-text">
      <strong>Description:</strong><br>
      <% if @project.description.present? %>
        <%= @project.description %>
      <% else %>
        <span class="text-muted">No description provided.</span>
      <% end %>
    </p>

    <p class="card-text">
      <strong>Manager:</strong>
      <% if @project.manager %>
        <%= @project.manager.name %>
      <% else %>
        <span class="text-muted">N/A</span>
      <% end %>
    </p>

    <p class="card-text">
      <strong>Status:</strong>
      <span class="badge bg-info text-dark">
        <%= @project.status.humanize %>
      </span>
    </p>

    <p class="card-text">
      <strong>Start Date:</strong>
      <%= @project.created_at.strftime('%d %B %Y') %>
    </p>

    <div class="mt-4 d-flex flex-wrap gap-2">
      <% if current_user.admin? %>
        <%= link_to "Edit Project", edit_project_path(@project), class: "btn btn-warning" %>

        <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#confirmDeleteModal"> Delete Project </button>
      <% end %>
      <% if current_user.manager? %>
        <%= link_to "Edit Project", edit_project_path(@project), class: "btn btn-warning" %>
      <% end %>

        <%= link_to "Project's Tasks", project_tasks_path(@project), class: "btn btn-primary text-white" %>

        <%= link_to "Back to Projects", projects_path, class: "btn btn-secondary" %>
    </div>
  </div>
</div>


<!-- Delete Confirmation Modal -->
<div class="modal fade" id="confirmDeleteModal" tabindex="-1" aria-labelledby="confirmDeleteModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      
      <div class="modal-header">
        <h5 class="modal-title" id="confirmDeleteModalLabel">Confirm Deletion</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body">
        Are you sure you want to delete project "<%= @project.title %>"?
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>

        <%= button_to project_path(@project),
              method: :delete,
              class: "btn btn-danger" do %>
          Yes, Delete
        <% end %>
      </div>

    </div>
  </div>
</div>
